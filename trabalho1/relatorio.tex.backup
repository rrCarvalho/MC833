\documentclass[a4paper,10pt,oneside,final,titlepage,onecolumn]{scrartcl}

\usepackage{ucs}
\usepackage[portuguese]{babel}
\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage{graphicx}
\usepackage{placeins}

\usepackage{listings}
\usepackage{color}

\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\setkomafont{disposition}{\normalfont\bfseries}

\lstset{frame=tb,
  language=bash,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\scriptsize\ttfamily},
  numbers=none,  
  breaklines=true,
  breakatwhitespace=true
  tabsize=3
}



\title{Trabalho 1 de MC833 --- Programação em Redes de Computadores}
\subtitle{Servidor de informação baseado em localização com socket TCP e UDP}
\author{Pedro Henrique Moura Andere, 10xxxx, turma A\and Raul Rabelo Carvalho, 105607, turma A}



\begin{document}



\maketitle



\section{Casos de uso do sistema}
\paragraph{}O sistema neste Trabalho utiliza um modelo de cliente/servidor, no qual existe um servidor de informação que acessa e processa os dados dos estabelecimentos cadastrados e um conjunto de clientes que requerem parte ou a totalidade dos dados para serem exibidos aos usuários.
\paragraph{}O sistema aceita comandos do usuário pelo \emph{software} cliente. Os comandos são:
\begin{description}
 \item
\end{description}


\subsection{Caso de uso: buscar por um estabelecimento próximo de uma categoria específica}
\begin{description}
 \item[Ator:] \hfill \\ Usuário do cliente.
 \item[Escopo:] \hfill \\ Sistema cliente/servidor.
 \item[Fluxo básico:] \hfill \\
 \begin{enumerate}
  \item Executar o cliente com os argumentos endereço IP e porta do servidor.
  \item Informar ao servidor a posição atual do cliente: \verb|posicao x,y|.
  \item Listar as categorias de estabelecimentos disponíveis: \verb|categorias|.
  \item Listar os estabelecimentos próximos da posição atual na categoria desejada: \verb|listar perto categoria <categoria>|.
  \item Exibir as informações do estabelecimento escolhido: \verb|info <id>|.
  \item Encerrar o cliente: \verb|sair|.
 \end{enumerate}
 \item[Extenção:] \hfill \\ Após o passo 5, o usuário pode dar uma nota ao estabelecimento: \verb|votar <id> <nota>.
\end{description}

\subsection{Caso de uso: buscar por um estabelecimento próximo}
\begin{description}
 \item[Ator:] \hfill \\ Usuário do cliente.
 \item[Escopo:] \hfill \\ Sistema cliente/servidor.
 \item[Fluxo básico:] \hfill \\
 \begin{enumerate}
  \item Executar o cliente com os argumentos endereço IP e porta do servidor.
  \item Informar ao servidor a posição atual do cliente: \verb|posicao x,y|.
  \item Listar os estabelecimentos próximos da posição atual: \verb|listar perto todos|.
  \item Exibir as informações do estabelecimento escolhido: \verb|info <id>|.
  \item Encerrar o cliente: \verb|sair|.
 \end{enumerate}
 \item[Extenção:] \hfill \\ Após o passo 4, o usuário pode dar uma nota ao estabelecimento: \verb|votar <id> <nota>.
\end{description}

\subsection{Caso de uso: buscar por um estabelecimento de uma categoria específica}
\begin{description}
 \item[Ator:] \hfill \\ Usuário do cliente.
 \item[Escopo:] \hfill \\ Sistema cliente/servidor.
 \item[Fluxo básico:] \hfill \\
 \begin{enumerate}
  \item Executar o cliente com os argumentos endereço IP e porta do servidor.
  \item Listar as categorias de estabelecimentos disponíveis: \verb|categorias|.
  \item Listar os estabelecimentos na categoria desejada: \verb|listar categoria <categoria>|.
  \item Exibir as informações do estabelecimento escolhido: \verb|info <id>|.
  \item Encerrar o cliente: \verb|sair|.
 \end{enumerate}
 \item[Extenção:] \hfill \\ Após o passo 4, o usuário pode dar uma nota ao estabelecimento: \verb|votar <id> <nota>.
\end{description}

\subsection{Caso de uso: listar todos os estabelecimentos}
\begin{description}
 \item[Ator:] \hfill \\ Usuário do cliente.
 \item[Escopo:] \hfill \\ Sistema cliente/servidor.
 \item[Fluxo básico:] \hfill \\
 \begin{enumerate}
  \item Executar o cliente com os argumentos endereço IP e porta do servidor.
  \item Listar os todos os estabelecimentos cadastrados: \verb|listar todos|.
  \item Encerrar o cliente: \verb|sair|.
 \end{enumerate}
 \item[Extenção:] \hfill \\ Após o passo 2, o usuário pode:
 \begin{itemize}
  \item Exibir as informações de um estabelecimento: \verb|info <id>|.
  \item Dar uma nota a um estabelecimento: \verb|votar <id> <nota>|.
 \end{itemize}
\end{description}




\FloatBarrier

\section{Armazenamento e estruturas de dados}
\paragraph{}Cada estabelecimento cadastrado no servidor de informação foi modelado por uma estrutura de dados na linguagem C (\verb|struct item|) definida como um tipo \verb|item_t|. A estrutura contém cinco campos do tipo inteiro e três do tipo vetor de caracteres. Os campos são os seguintes:
\begin{description}
 \item[id] \hfill \\ (Inteiro.) O identificador único de cada estabelecimento.
 \item[posx] \hfill \\ (Inteiro.) A coordenada no eixo-x da posição do estabelecimento.
 \item[posy] \hfill \\ (Inteiro.) A coordenada no eixo-y da posição do estabelecimento.
 \item[categoria] \hfill \\ (Vetor de caracteres.) O nome da categoria ao qual o estabelecimento pertence.
 \item[nome] \hfill \\ (Vetor de caracteres.) O nome do estabelecimento.
 \item[endereco] \hfill \\ (Vetor de caracteres.) O endereço do estabelecimento.
 \item[pontuacao] \hfill \\ (Inteiro.) O total acumulado das notas dadas ao estabelecimento.
 \item[votos] \hfill \\ (Inteiro.) O total de vezes que o estabelecimento recebeu uma nota.
\end{description}
\paragraph{}Todos os inteiros são inteiros com sinal (apesar de que nenhum dos campos necessita armazenar valores negativos) e os vetores de caracteres têm todos comprimento máximo de 256 posições. Foi escolhido dar um tamanho máximo para esses campos, pois torna a implementação mais simples e menos propensa a erros; além disso, bancos de dados comumente trabalham com campos de tamanho fixo.

Um vetor do tipo \verb|item_t| pode empregado para guardar na memória para uso pelo servidor uma parte ou a totalidade (como é o caso da implementação feita para este Trabalho) do conjunto de estabelecimentos cadastrados.

Para o armazenamento permanente dos dados em disco, foi usado um arquivo de texto simples contendo por linha as informações de um estabelecimento, com cada campo separado por um ponto-e-vírgula. A ordem dos campos é a mesma da lista acima. A única exceção é a primeira linha que contém somente um inteiro com o número de estabelecimentos contidos no arquivo. É importante que esteve número esteja correto, pois o servidor irá ignorar qualquer entrada além da quantidade dada na primeira linha do arquivo, e irá encerrar com erro se o número de entradas for menor que esta quantidade.

Outra estrutura de dados empregada pelo servidor é a estrutura do tipo \verb|res_busca_t| que contém dois campos: um inteiro para guardar identificadores e um vetor de caracteres (também com 256 posições) para armazenar nomes. Um vetor deste tipo é usado para passar o resultado de buscas sobre o conjunto de estabelecimentos para as funções de impressão e comunicação do servidor.



\end{document}
